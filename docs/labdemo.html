<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Lab Demonstration: Probability Inclass activity</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="webex.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Teaching Reproducible Data Analysis in R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="/">
    <span class="fa fa-home"></span>
     
    GUPsych
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Lab Demonstration: ‘Probability’ Inclass activity</h1>
<h3 class="subtitle"><em>School of Psychology, University of Glasgow</em></h3>

</div>


<div id="general-lab-layout" class="section level3">
<h3>General Lab Layout</h3>
<p>Over the course of the year our prehonours students all complete a series of labs that are designed to help them develop and expand their understanding of research methods, research practices, and research analysis. There are 6 of these labs in Year 1 (3 per Semester) and 18 of these labs in Year 2 (9 per semester). Within each lab a certain length of time (e.g. 1hr) is given over to elements related to analysis including: reproducible coding; data-wrangling; generating figures; probability; power and effect sizes; distributions; descriptives; inferentials; General Linear Model.</p>
<p>All the labs have the format of:</p>
<ul>
<li><strong>Preclass Activity:</strong> Generally a highly scaffolded activity showing the basics of how to use certain functions or how to understand certain tests. In later labs this is replaced by reading appropriate chapters or blog sites.</li>
<li><strong>Inclass Activity:</strong> Less scaffolded activity based around the preclass activity. Often used to tests students understanding but at the same time offer them the solutions to help them along and to consolidate their learning. By the end of inclass and preclass activities students should be ready to complete the homework.</li>
<li><strong>Homework Assignment:</strong> A series of questions and activities that test students’ understanding of the lab they have just completed. Often involves creating code chunks, plotting figures, answering multiple choice questions, and even writing short paragraphs.</li>
</ul>
</div>
<div id="the-lab-demonstration" class="section level3">
<h3>The Lab Demonstration</h3>
<p>For this Lab demonstartion we are using an updated version of the 4th inclass activity from our Year 2 course, Semester 1 - as such the wording assumes you have completed the preclass activity for this lab which focussed on explaining probability via the binomial distribution and coin tosses. By this stage in their development students have already been introduced to RMarkdown, installing and loading libraries, data-wrangling and the Wickham six verbs, and generating figures through ggplot.</p>
</div>
<div id="back-to-basic-probability" class="section level3">
<h3>Back to basic probability</h3>
<p>In nearly all the labs this year we will need the <code>tidyverse</code> to complete our activities. Start a new script or Rmd file and copy and run the below line to bring the tidyverse into our working environment.</p>
<pre class="r"><code>library(&quot;tidyverse&quot;)</code></pre>
<p>Before doing any coding we will start off by briefly looking at a couple of examples of probability, based on the preclass activity, to make sure you have understood it. Just select the correct answer from the dropdown menus - they will turn blue if you are correct. Also, keep in mind that R can be used as a calculator (e.g. <code>calculation &lt;-  4 + 3</code>) if you want to run some quick maths. See the hints below the questions if you are unsure.</p>
<ol style="list-style-type: decimal">
<li><p>What is the probability of rolling a 4 on a single roll of one six-sided dice? <select class='solveme' data-answer='["1/6"]'> <option></option> <option>1/2</option> <option>1/3</option> <option>1/4</option> <option>1/6</option> </select></p></li>
<li><p>What is the probability of rolling a 4, 5 <em>or</em> 6 on a single roll? <select class='solveme' data-answer='["1/2"]'> <option></option> <option>1/2</option> <option>1/3</option> <option>1/4</option> <option>1/6</option> </select></p></li>
<li>The combined probability of two outcomes is calculated by <select class='solveme' data-answer='["multiplying"]'> <option></option> <option>adding</option> <option>subtracting</option> <option>multiplying</option> <option>dividing</option> </select> the individual probabilities!</li>
<li><p>Based on your answer to question 3, to three decimal places, what is the probability of rolling a 4 <em>and then</em> a 6 straight after? <select class='solveme' data-answer='[".028"]'> <option></option> <option>.028</option> <option>.333</option> <option>.000</option> <option>1.000</option> </select></p></li>
</ol>
<div class="solution">
<button>
Hint for Question 1
</button>
<p>One possible outcome from six</p>
</div>
<div class="solution">
<button>
Hint for Question 2
</button>
<p>Three possible outcomes from six</p>
</div>
<div class="solution">
<button>
Hint for Question 3
</button>
<p>Combining probabilities should make things more unlikely but still possible</p>
</div>
<div class="solution">
<button>
Hint for Question 4
</button>
<p>The probability of Question 1 by the probability of Question 1</p>
</div>
<p><br></br>Great! We will now look again at the binomial distribution and test your knowledge of probability and of coding. We covered this in the preclass activity so refer back to that or the supplied hints should you get stuck. S</p>
</div>
<div id="return-of-the-binomial" class="section level3">
<h3>Return of the Binomial</h3>
<p>You design a psychology experiment where you are interested in how quickly people spot faces. Using a standard task you compare images of faces, houses and noise patterns and you ask participants to respond <code>face</code> or <code>not</code>. You set the experiment so that across the whole experiment the number of images per stimuli type are evenly split (1/3 per type) but not necessarily evenly split across the three stimuli in any one block. Each block contains 60 trials. To test your experiment you run one block and get concerned that you only saw 10 faces and thought something might be wrong. You decide to create a probabiliy distribution for one block to test the likelihood of seeing a face (coded as 1) versus not seeing a face (coded as 0).</p>
<ol style="list-style-type: decimal">
<li>You start off with the below <code>sample()</code> function but it is incomplete. Replace both the <code>NULL</code> to establish an estimate of how many faces you would likely see in 1 block of 60 trials. <strong>Note that the probability (prob) is set to weight “not seeing a face” (2/3) more than “seeing a face” (1/3).</strong></li>
</ol>
<pre class="r"><code>sample(0:1, NULL, replace = NULL, prob = c(2/3, 1/3)) %&gt;% sum()</code></pre>
<div class="solution">
<button>
I need a hint!
</button>
<ul>
<li>NULL 1 - How many trials are there?</li>
<li>NULL 2 - On each trial, TRUE or FALSE, do you want both 0 and 1 as an option?</li>
</ul>
</div>
<p><br></br> 2. So we now have a rough number of how many times a face will likely have been seen in a block. But we want to know how that compares to our actual count of 10 faces when we ran the experiment. To do this we will need to create a distribution. Replacing the NULL and saving your result as <code>blocks_5k</code>, use the <code>replicate</code> function to repeat the test in Step 1 for 5000 blocks of 60 trials.</p>
<pre class="r"><code>blocks_5k &lt;- NULL</code></pre>
<div class="solution">
<button>
I need a hint!
</button>
<ul>
<li>?replicate</li>
<li>replicate(N, function)</li>
</ul>
</div>
<p><br></br> 3. If your code has worked so far then running the below chunk should create a tibble with two columns: <code>faces</code> showing the number of faces seen in individual runs, and <code>n</code> the count if how many times that number of faces was seen. Run these lines in your code and see. If not, something has gone wrong; debug.</p>
<pre class="r"><code>data5K &lt;- tibble(faces = blocks_5k) %&gt;% 
  count(faces) </code></pre>
<ol start="4" style="list-style-type: decimal">
<li>We now want the probability of seeing different numbers of faces within one block. To do this replace the NULL with a mutate that converts <code>n</code> to a probability and places these probabilties in a column called <code>p</code>.</li>
</ol>
<pre class="r"><code>data5K &lt;- NULL</code></pre>
<div class="solution">
<button>
I need a hint!
</button>
<ul>
<li>?mutate</li>
<li>mutate(data, new_name = maths)</li>
</ul>
</div>
<p><br></br> 5. Now that we have our distribution we should look at it. Plot the distribution of probabilities stored within <code>data5K</code>. Add a theme of your chosing and remember to label the axes appropriately.</p>
<div class="solution">
<button>
I need a hint!
</button>
<ul>
<li>?ggplot</li>
<li>ggplot(data, aes(x, y))</li>
<li>Remember to add (+) your layers: geom_xxx(); labs(); theme_xx()</li>
</ul>
</div>
<p><br></br> 6. From your <code>data5k</code> tibble, what was the probability of seeing only 10 faces in a block. Do this through a line of code, replacing the NULL, and storing the answer as a single value in <code>prob_10faces</code>. You will need the new function <code>pluck()</code>.</p>
<pre class="r"><code>prob_10faces &lt;- NULL</code></pre>
<div class="solution">
<button>
I need a hint!
</button>
<ul>
<li>?filter</li>
<li>filter(data, column == rule)</li>
<li>?pluck</li>
<li>pluck(“column”)</li>
</ul>
</div>
</div>
<div id="check-your-understanding" class="section level3">
<h3>Check your understanding</h3>
<ol style="list-style-type: lower-alpha">
<li><p>The probability of obtaining only 10 faces in a block of the experiment as it is currently designed is less than 1% <select class='solveme' data-answer='["TRUE"]'> <option></option> <option>TRUE</option> <option>FALSE</option> </select></p></li>
<li><p>Given that we obtained <select class='solveme' data-answer='["10"]'> <option></option> <option>1</option> <option>10</option> <option>19</option> <option>60</option> </select> faces in our block, the probability of which to two decimal places is <input class='solveme nospaces' size='3' data-answer='[".01"]'/>, indicates that obtaining only 10 faces in a block of the experiment as it is currently designed is less than 1%. True or False? <select class='solveme' data-answer='["TRUE"]'> <option></option> <option>TRUE</option> <option>FALSE</option> </select></p></li>
<li><p>Therefore it is <select class='solveme' data-answer='["likely"]'> <option></option> <option>likely</option> <option>unlikely</option> </select> that there is an issue in the set-up of our experiment.</p></li>
</ol>
</div>
<div id="binom-pbinom-qbinom" class="section level2">
<h2>binom(), pbinom(), qbinom()</h2>
<p>An alternative to the above process would have be to use the the appropriate <code>binom()</code> function to determine the probability of 10 faces in 60 trials. Do this now, replacing the NULL in the below chunk with one line of code.</p>
<pre class="r"><code>act_p_10faces &lt;- NULL</code></pre>
<div class="solution">
<button>
I need a hint!
</button>
<ul>
<li>?dbinom</li>
<li>number, trials, probability of faces being shown</li>
</ul>
</div>
<p><br></br> And we can look at it from a different viewpoint using the <code>pbinom()</code> function. What would be the probability of seeing <em>more than 25 faces in a block of 60 trials</em>.</p>
<pre class="r"><code>act_p &lt;- NULL </code></pre>
<div class="solution">
<button>
I need a hint!
</button>
<ul>
<li>?pbinom</li>
<li>number, trials, probability of faces being shown, lower.tail for more than</li>
</ul>
</div>
<div id="check-your-understanding-2" class="section level3">
<h3>Check your understanding 2</h3>
<ol style="list-style-type: lower-alpha">
<li><p>Which function is equivalent to returning the height of a column in a distribution? <select class='solveme' data-answer='["dbinom"]'> <option></option> <option>rbinom</option> <option>dbinom</option> <option>qbinom</option> <option>pbinom</option> </select></p></li>
<li><p>Which function returns the summed probabilities in a distribution? <select class='solveme' data-answer='["pbinom"]'> <option></option> <option>rbinom</option> <option>dbinom</option> <option>qbinom</option> <option>pbinom</option> </select></p></li>
<li><p>When using <code>pbinom</code> to find the probability of values less than or equal to some X value, the argument <code>lower.tail</code> should be set to <select class='solveme' data-answer='["TRUE"]'> <option></option> <option>TRUE</option> <option>FALSE</option> </select></p></li>
</ol>
<p>Congratulations. You have now completed the Lab demonstration.</p>
</div>
<div id="what-happens-next" class="section level3">
<h3>What happens next!</h3>
<p>For homework, students would now be given a link to a <strong><em>stub</em></strong> Rmd file with similar questions as to the above where they replace the NULL in the code chunk with either the apporpriate value, function, or code. Students then complete the code chunks and submit the Rmd file to Moodle for assessment within one week as well as completing any preparation for the following lab. Further information as regards the computer-assisted marking of these assessments will be shown in the next talk session.</p>
</div>
<div id="solutions" class="section level3">
<h3>Solutions</h3>
<div class="solution">
<button>
Solution Step 1
</button>
<pre class="r"><code>sample(0:1, 60, replace = TRUE, prob = c(2/3, 1/3)) %&gt;% sum()</code></pre>
</div>
<div class="solution">
<button>
Solution Step 2
</button>
<pre class="r"><code>blocks_5k &lt;- replicate(5000, sum(sample(0:1, 60, TRUE, c(2/3, 1/3))))</code></pre>
</div>
<div class="solution">
<button>
Solution Step 4
</button>
<pre class="r"><code>data5K &lt;- data5K %&gt;% mutate(p = n / 5000)</code></pre>
</div>
<div class="solution">
<button>
Solution Step 5
</button>
<pre class="r"><code>ggplot(data5K, aes(faces, p)) + 
  geom_col() + 
  labs(x = &quot;Number of Faces&quot;, y = &quot;Probability&quot;) + 
  theme_bw()</code></pre>
</div>
<div class="solution">
<button>
Solution Step 6
</button>
<pre class="r"><code>prob_10faces &lt;- filter(data5K, faces == 10) %&gt;% pluck(&quot;p&quot;)</code></pre>
</div>
<div class="solution">
<button>
Solution dbinom
</button>
<pre class="r"><code>act_p_10faces &lt;- dbinom(10, 60, 1/3)</code></pre>
</div>
<div class="solution">
<button>
Solution pbinom
</button>
<pre class="r"><code>act_p &lt;- pbinom(26, 60, 1/3, lower.tail = FALSE)</code></pre>
</div>
</div>
<div id="notes" class="section level3">
<h3>Notes</h3>
<p>This page was created using a Web Exercise template created by the <a href="http://www.psy.gla.ac.uk">psychology teaching team at the University of Glasgow</a>, inspired by <a href="https://software-carpentry.org/lessons/">Software Carpentry</a> webpages. This template enables instructors to easily create web documents that students can use in self-assessment.</p>
<p>The <a href="https://github.com/dalejbarr/webex">webex package</a> provides a number of functions that you use in <a href="https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf">inline R code</a> to create HTML widgets (text boxes, pull down menus, buttons that reveal hidden content). Examples are provided in this document. Knit this file to HTML to see how it works.</p>
<p><em>NOTE: If the widgets don’t work for you in the built-in RStudio browser, open the HTML file in a different browser.</em></p>
</div>
</div>

<script>

/* update total correct if #total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("correct").length + " of " +
      document.getElementsByClassName("solveme").length + " correct";
  }
}

/* solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "");
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("correct");
  } else {
    cl.remove("correct");
  }
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up solveme inputs */
  var solveme = document.getElementsByClassName("solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
